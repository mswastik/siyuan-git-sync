"use strict";var Ze=Object.defineProperty;var $e=(t,e,n)=>e in t?Ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>$e(t,typeof e!="symbol"?e+"":e,n);const y=require("siyuan");function q(){}function et(t,e){for(const n in e)t[n]=e[n];return t}function qe(t){return t()}function De(){return Object.create(null)}function P(t){t.forEach(qe)}function He(t){return typeof t=="function"}function ie(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function tt(t){return Object.keys(t).length===0}function ve(t,e,n,l){if(t){const o=xe(t,e,n,l);return t[0](o)}}function xe(t,e,n,l){return t[1]&&l?et(n.ctx.slice(),t[1](l(e))):n.ctx}function ye(t,e,n,l){if(t[2]&&l){const o=t[2](l(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const i=[],s=Math.max(e.dirty.length,o.length);for(let r=0;r<s;r+=1)i[r]=e.dirty[r]|o[r];return i}return e.dirty|o}return e.dirty}function Be(t,e,n,l,o,i){if(o){const s=xe(e,n,l,i);t.p(s,o)}}function we(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function m(t,e){t.appendChild(e)}function C(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode&&t.parentNode.removeChild(t)}function We(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function V(t){return document.createTextNode(t)}function w(){return V(" ")}function Ee(){return V("")}function T(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function be(t){return t===""?null:+t}function nt(t){return Array.from(t.childNodes)}function W(t,e){e=""+e,t.data!==e&&(t.data=e)}function N(t,e){t.value=e??""}function $(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function ze(t,e,n){for(let l=0;l<t.options.length;l+=1){const o=t.options[l];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function lt(t){const e=t.querySelector(":checked");return e&&e.__value}function E(t,e,n){t.classList.toggle(e,!!n)}function it(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let te;function ee(t){te=t}function Se(){if(!te)throw new Error("Function called outside component initialization");return te}function ot(t){Se().$$.on_mount.push(t)}function st(t){Se().$$.on_destroy.push(t)}function Ye(){const t=Se();return(e,n,{cancelable:l=!1}={})=>{const o=t.$$.callbacks[e];if(o){const i=it(e,n,{cancelable:l});return o.slice().forEach(s=>{s.call(t,i)}),!i.defaultPrevented}return!0}}const G=[],fe=[];let K=[];const _e=[],ct=Promise.resolve();let ke=!1;function at(){ke||(ke=!0,ct.then(Ge))}function de(t){K.push(t)}function ut(t){_e.push(t)}const ge=new Set;let Y=0;function Ge(){if(Y!==0)return;const t=te;do{try{for(;Y<G.length;){const e=G[Y];Y++,ee(e),rt(e.$$)}}catch(e){throw G.length=0,Y=0,e}for(ee(null),G.length=0,Y=0;fe.length;)fe.pop()();for(let e=0;e<K.length;e+=1){const n=K[e];ge.has(n)||(ge.add(n),n())}K.length=0}while(G.length);for(;_e.length;)_e.pop()();ke=!1,ge.clear(),ee(t)}function rt(t){if(t.fragment!==null){t.update(),P(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(de)}}function ft(t){const e=[],n=[];K.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),K=e}const re=new Set;let x;function Ke(){x={r:0,c:[],p:x}}function Je(){x.r||P(x.c),x=x.p}function j(t,e){t&&t.i&&(re.delete(t),t.i(e))}function A(t,e,n,l){if(t&&t.o){if(re.has(t))return;re.add(t),x.c.push(()=>{re.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function J(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function dt(t,e){A(t,1,1,()=>{e.delete(t.key)})}function ht(t,e,n,l,o,i,s,r,c,d,p,a){let f=t.length,u=i.length,g=f;const _={};for(;g--;)_[t[g].key]=g;const v=[],I=new Map,M=new Map,O=[];for(g=u;g--;){const B=a(o,i,g),L=n(B);let z=s.get(L);z?O.push(()=>z.p(B,e)):(z=d(L,B),z.c()),I.set(L,v[g]=z),L in _&&M.set(L,Math.abs(g-_[L]))}const F=new Set,k=new Set;function D(B){j(B,1),B.m(r,p),s.set(B.key,B),p=B.first,u--}for(;f&&u;){const B=v[u-1],L=t[f-1],z=B.key,R=L.key;B===L?(p=B.first,f--,u--):I.has(R)?!s.has(z)||F.has(z)?D(B):k.has(R)?f--:M.get(z)>M.get(R)?(k.add(z),D(B)):(F.add(R),f--):(c(L,s),f--)}for(;f--;){const B=t[f];I.has(B.key)||c(B,s)}for(;u;)D(v[u-1]);return P(O),v}function pt(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function he(t){t&&t.c()}function ne(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),de(()=>{const i=t.$$.on_mount.map(qe).filter(He);t.$$.on_destroy?t.$$.on_destroy.push(...i):P(i),t.$$.on_mount=[]}),o.forEach(de)}function le(t,e){const n=t.$$;n.fragment!==null&&(ft(n.after_update),P(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(t,e){t.$$.dirty[0]===-1&&(G.push(t),at(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function oe(t,e,n,l,o,i,s=null,r=[-1]){const c=te;ee(t);const d=t.$$={fragment:null,ctx:[],props:i,update:q,not_equal:o,bound:De(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:De(),dirty:r,skip_bound:!1,root:e.target||c.$$.root};s&&s(d.root);let p=!1;if(d.ctx=n?n(t,e.props||{},(a,f,...u)=>{const g=u.length?u[0]:f;return d.ctx&&o(d.ctx[a],d.ctx[a]=g)&&(!d.skip_bound&&d.bound[a]&&d.bound[a](g),p&&mt(t,a)),f}):[],d.update(),p=!0,P(d.before_update),d.fragment=l?l(d.ctx):!1,e.target){if(e.hydrate){const a=nt(e.target);d.fragment&&d.fragment.l(a),a.forEach(S)}else d.fragment&&d.fragment.c();e.intro&&j(t.$$.fragment),ne(t,e.target,e.anchor),Ge()}ee(c)}class se{constructor(){U(this,"$$");U(this,"$$set")}$destroy(){le(this,1),this.$destroy=q}$on(e,n){if(!He(n))return q;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!tt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const gt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(gt);async function Qe(t,e){let n=await y.fetchSyncPost(t,e);return n.code===0?n.data:null}async function bt(t){return Qe("/api/query/sql",{stmt:t})}async function _t(){return Qe("/api/system/version",{})}function kt(t){var Te;let e,n,l,o,i,s,r,c=((Te=t[0])==null?void 0:Te.appId)+"",d,p,a,f,u,g,_,v,I,M,O,F,k,D,B,L,z,R,Ce,ce,Ie,pe,Oe,me,Le,Q;return{c(){e=b("div"),n=b("div"),n.textContent="appId:",l=w(),o=b("div"),i=w(),s=b("div"),r=V("$"),d=V(c),p=w(),a=b("div"),f=w(),u=b("div"),g=w(),_=b("div"),_.textContent="API demo:",v=w(),I=b("div"),M=w(),O=b("div"),F=V("System current time: "),k=b("span"),D=V(t[1]),B=w(),L=b("div"),z=w(),R=b("div"),Ce=w(),ce=b("div"),Ie=V("Protyle demo: id = "),pe=V(t[3]),Oe=w(),me=b("div"),Le=w(),Q=b("div"),h(o,"class","fn__hr"),h(s,"class","plugin-sample__time"),h(a,"class","fn__hr"),h(u,"class","fn__hr"),h(I,"class","fn__hr"),h(k,"id","time"),h(O,"class","plugin-sample__time"),h(L,"class","fn__hr"),h(R,"class","fn__hr"),h(me,"class","fn__hr"),h(Q,"id","protyle"),$(Q,"height","360px"),h(e,"class","b3-dialog__content")},m(H,X){C(H,e,X),m(e,n),m(e,l),m(e,o),m(e,i),m(e,s),m(s,r),m(s,d),m(e,p),m(e,a),m(e,f),m(e,u),m(e,g),m(e,_),m(e,v),m(e,I),m(e,M),m(e,O),m(O,F),m(O,k),m(k,D),m(e,B),m(e,L),m(e,z),m(e,R),m(e,Ce),m(e,ce),m(ce,Ie),m(ce,pe),m(e,Oe),m(e,me),m(e,Le),m(e,Q),t[4](Q)},p(H,[X]){var Me;X&1&&c!==(c=((Me=H[0])==null?void 0:Me.appId)+"")&&W(d,c),X&2&&W(D,H[1]),X&8&&W(pe,H[3])},i:q,o:q,d(H){H&&S(e),t[4](null)}}}function vt(t,e,n){let{app:l}=e,o="",i,s,r="";ot(async()=>{await _t(),y.fetchPost("/api/system/currentTime",{},p=>{n(1,o=new Date(p.data).toString())}),s=await c()}),st(()=>{y.showMessage("Hello panel closed"),s.destroy()});async function c(){let a=await bt("SELECT * FROM blocks ORDER BY RANDOM () LIMIT 1;");return n(3,r=a[0].id),new y.Protyle(l,i,{blockId:r})}function d(p){fe[p?"unshift":"push"](()=>{i=p,n(2,i)})}return t.$$set=p=>{"app"in p&&n(0,l=p.app)},[l,o,i,r,d]}class Pe extends se{constructor(e){super(),oe(this,e,vt,kt,ie,{app:0})}}function Fe(t,e,n){const l=t.slice();return l[0]=e[n][0],l[18]=e[n][1],l}function yt(t){let e,n,l,o,i,s,r;return{c(){e=b("div"),n=b("input"),h(n,"id","fontSize"),h(n,"min",l=t[5].min),h(n,"max",o=t[5].max),h(n,"step",i=t[5].step),h(n,"type","range"),h(n,"style",t[8]),E(n,"b3-slider",!0),E(n,"fn__size200",t[7]),h(e,"class","b3-tooltips b3-tooltips__n"),h(e,"aria-label",t[0])},m(c,d){C(c,e,d),m(e,n),N(n,t[0]),s||(r=[T(n,"change",t[16]),T(n,"input",t[16]),T(n,"change",t[10])],s=!0)},p(c,d){d&32&&l!==(l=c[5].min)&&h(n,"min",l),d&32&&o!==(o=c[5].max)&&h(n,"max",o),d&32&&i!==(i=c[5].step)&&h(n,"step",i),d&256&&h(n,"style",c[8]),d&17&&N(n,c[0]),d&128&&E(n,"fn__size200",c[7]),d&17&&h(e,"aria-label",c[0])},d(c){c&&S(e),s=!1,P(r)}}}function Bt(t){let e,n,l,o=J(Object.entries(t[4])),i=[];for(let s=0;s<o.length;s+=1)i[s]=Ue(Fe(t,o,s));return{c(){e=b("select");for(let s=0;s<i.length;s+=1)i[s].c();h(e,"id","iconPosition"),h(e,"style",t[8]),t[0]===void 0&&de(()=>t[15].call(e)),E(e,"b3-select",!0),E(e,"fn__flex-center",!0),E(e,"fn__size200",t[7])},m(s,r){C(s,e,r);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);ze(e,t[0],!0),n||(l=[T(e,"change",t[15]),T(e,"change",t[10])],n=!0)},p(s,r){if(r&16){o=J(Object.entries(s[4]));let c;for(c=0;c<o.length;c+=1){const d=Fe(s,o,c);i[c]?i[c].p(d,r):(i[c]=Ue(d),i[c].c(),i[c].m(e,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}r&256&&h(e,"style",s[8]),r&17&&ze(e,s[0]),r&128&&E(e,"fn__size200",s[7])},d(s){s&&S(e),We(i,s),n=!1,P(l)}}}function wt(t){let e,n=t[6].label+"",l,o,i;return{c(){e=b("button"),l=V(n),h(e,"id",t[2]),h(e,"style",t[8]),E(e,"b3-button",!0),E(e,"b3-button--outline",!0),E(e,"fn__flex-center",!0),E(e,"fn__size200",t[7])},m(s,r){C(s,e,r),m(e,l),o||(i=T(e,"click",t[9]),o=!0)},p(s,r){r&64&&n!==(n=s[6].label+"")&&W(l,n),r&4&&h(e,"id",s[2]),r&256&&h(e,"style",s[8]),r&128&&E(e,"fn__size200",s[7])},d(s){s&&S(e),o=!1,i()}}}function Et(t){let e,n,l;return{c(){e=b("input"),h(e,"id",t[2]),h(e,"type","number"),h(e,"style",t[8]),E(e,"b3-text-field",!0),E(e,"fn__flex-center",!0),E(e,"fn__size200",t[7])},m(o,i){C(o,e,i),N(e,t[0]),n||(l=[T(e,"input",t[14]),T(e,"change",t[10])],n=!0)},p(o,i){i&4&&h(e,"id",o[2]),i&256&&h(e,"style",o[8]),i&17&&be(e.value)!==o[0]&&N(e,o[0]),i&128&&E(e,"fn__size200",o[7])},d(o){o&&S(e),n=!1,P(l)}}}function St(t){let e,n,l,o;return{c(){e=b("textarea"),h(e,"class","b3-text-field fn__block"),h(e,"style",n=`resize: vertical; height: 10em; white-space: nowrap; ${t[8]}`)},m(i,s){C(i,e,s),N(e,t[0]),l||(o=[T(e,"input",t[13]),T(e,"change",t[10])],l=!0)},p(i,s){s&256&&n!==(n=`resize: vertical; height: 10em; white-space: nowrap; ${i[8]}`)&&h(e,"style",n),s&17&&N(e,i[0])},d(i){i&&S(e),l=!1,P(o)}}}function Ct(t){let e,n,l;return{c(){e=b("input"),h(e,"id",t[2]),h(e,"placeholder",t[3]),h(e,"style",t[8]),E(e,"b3-text-field",!0),E(e,"fn__flex-center",!0),E(e,"fn__size200",t[7])},m(o,i){C(o,e,i),N(e,t[0]),n||(l=[T(e,"input",t[12]),T(e,"change",t[10])],n=!0)},p(o,i){i&4&&h(e,"id",o[2]),i&8&&h(e,"placeholder",o[3]),i&256&&h(e,"style",o[8]),i&17&&e.value!==o[0]&&N(e,o[0]),i&128&&E(e,"fn__size200",o[7])},d(o){o&&S(e),n=!1,P(l)}}}function It(t){let e,n,l;return{c(){e=b("input"),h(e,"class","b3-switch fn__flex-center"),h(e,"id",t[2]),h(e,"type","checkbox"),h(e,"style",t[8])},m(o,i){C(o,e,i),e.checked=t[0],n||(l=[T(e,"change",t[11]),T(e,"change",t[10])],n=!0)},p(o,i){i&4&&h(e,"id",o[2]),i&256&&h(e,"style",o[8]),i&17&&(e.checked=o[0])},d(o){o&&S(e),n=!1,P(l)}}}function Ue(t){let e,n=t[18]+"",l,o;return{c(){e=b("option"),l=V(n),e.__value=o=t[0],N(e,e.__value)},m(i,s){C(i,e,s),m(e,l)},p(i,s){s&16&&n!==(n=i[18]+"")&&W(l,n),s&16&&o!==(o=i[0])&&(e.__value=o,N(e,e.__value))},d(i){i&&S(e)}}}function Ot(t){let e;function n(i,s){if(i[1]==="checkbox")return It;if(i[1]==="textinput")return Ct;if(i[1]==="textarea")return St;if(i[1]==="number")return Et;if(i[1]==="button")return wt;if(i[1]==="select")return Bt;if(i[1]=="slider")return yt}let l=n(t),o=l&&l(t);return{c(){o&&o.c(),e=Ee()},m(i,s){o&&o.m(i,s),C(i,e,s)},p(i,[s]){l===(l=n(i))&&o?o.p(i,s):(o&&o.d(1),o=l&&l(i),o&&(o.c(),o.m(e.parentNode,e)))},i:q,o:q,d(i){i&&S(e),o&&o.d(i)}}}function Lt(t,e,n){let{type:l}=e,{key:o}=e,{value:i}=e,{placeholder:s=""}=e,{options:r={}}=e,{slider:c={min:0,max:100,step:1}}=e,{button:d={label:i,callback:()=>{}}}=e,{fnSize:p=!0}=e,{style:a=""}=e;const f=Ye();function u(){d==null||d.callback(),f("click",{key:o})}function g(){f("changed",{key:o,value:i})}function _(){i=this.checked,n(0,i),n(4,r)}function v(){i=this.value,n(0,i),n(4,r)}function I(){i=this.value,n(0,i),n(4,r)}function M(){i=be(this.value),n(0,i),n(4,r)}function O(){i=lt(this),n(0,i),n(4,r)}function F(){i=be(this.value),n(0,i),n(4,r)}return t.$$set=k=>{"type"in k&&n(1,l=k.type),"key"in k&&n(2,o=k.key),"value"in k&&n(0,i=k.value),"placeholder"in k&&n(3,s=k.placeholder),"options"in k&&n(4,r=k.options),"slider"in k&&n(5,c=k.slider),"button"in k&&n(6,d=k.button),"fnSize"in k&&n(7,p=k.fnSize),"style"in k&&n(8,a=k.style)},[i,l,o,s,r,c,d,p,a,u,g,_,v,I,M,O,F]}class Tt extends se{constructor(e){super(),oe(this,e,Lt,Ot,ie,{type:1,key:2,value:0,placeholder:3,options:4,slider:5,button:6,fnSize:7,style:8})}}function Mt(t){let e,n,l,o,i,s,r,c,d,p;const a=t[4].default,f=ve(a,t,t[3],null);return{c(){e=b("div"),n=b("div"),l=b("span"),o=V(t[0]),i=w(),s=b("div"),r=w(),c=b("span"),d=w(),f&&f.c(),h(l,"class","title svelte-ikiu6h"),h(s,"class","b3-label__text"),h(n,"class","fn__flex-1"),h(c,"class","fn__space"),h(e,"class","item-wrap fn__flex b3-label config__item svelte-ikiu6h")},m(u,g){C(u,e,g),m(e,n),m(n,l),m(l,o),m(n,i),m(n,s),s.innerHTML=t[1],m(e,r),m(e,c),m(e,d),f&&f.m(e,null),p=!0},p(u,g){(!p||g&1)&&W(o,u[0]),(!p||g&2)&&(s.innerHTML=u[1]),f&&f.p&&(!p||g&8)&&Be(f,a,u,u[3],p?ye(a,u[3],g,null):we(u[3]),null)},i(u){p||(j(f,u),p=!0)},o(u){A(f,u),p=!1},d(u){u&&S(e),f&&f.d(u)}}}function Dt(t){let e,n,l,o,i,s,r,c,d,p,a;const f=t[4].default,u=ve(f,t,t[3],null);return{c(){e=b("div"),n=b("div"),l=b("span"),o=V(t[0]),i=w(),s=b("div"),r=w(),c=b("div"),d=w(),p=b("div"),u&&u.c(),h(l,"class","title svelte-ikiu6h"),h(s,"class","b3-label__text"),h(c,"class","fn__hr"),$(p,"display","flex"),$(p,"flex-direction","column"),$(p,"gap","5px"),$(p,"position","relative"),h(n,"class","fn__block"),h(e,"class","item-wrap b3-label svelte-ikiu6h"),h(e,"data-key","CustomCSS")},m(g,_){C(g,e,_),m(e,n),m(n,l),m(l,o),m(n,i),m(n,s),s.innerHTML=t[1],m(n,r),m(n,c),m(n,d),m(n,p),u&&u.m(p,null),a=!0},p(g,_){(!a||_&1)&&W(o,g[0]),(!a||_&2)&&(s.innerHTML=g[1]),u&&u.p&&(!a||_&8)&&Be(u,f,g,g[3],a?ye(f,g[3],_,null):we(g[3]),null)},i(g){a||(j(u,g),a=!0)},o(g){A(u,g),a=!1},d(g){g&&S(e),u&&u.d(g)}}}function zt(t){let e,n,l,o;const i=[Dt,Mt],s=[];function r(c,d){return c[2]==="row"?0:1}return e=r(t),n=s[e]=i[e](t),{c(){n.c(),l=Ee()},m(c,d){s[e].m(c,d),C(c,l,d),o=!0},p(c,[d]){let p=e;e=r(c),e===p?s[e].p(c,d):(Ke(),A(s[p],1,1,()=>{s[p]=null}),Je(),n=s[e],n?n.p(c,d):(n=s[e]=i[e](c),n.c()),j(n,1),n.m(l.parentNode,l))},i(c){o||(j(n),o=!0)},o(c){A(n),o=!1},d(c){c&&S(l),s[e].d(c)}}}function Pt(t,e,n){let{$$slots:l={},$$scope:o}=e,{title:i}=e,{description:s}=e,{direction:r="column"}=e;return t.$$set=c=>{"title"in c&&n(0,i=c.title),"description"in c&&n(1,s=c.description),"direction"in c&&n(2,r=c.direction),"$$scope"in c&&n(3,o=c.$$scope)},[i,s,r,o,l]}class Ft extends se{constructor(e){super(),oe(this,e,Pt,zt,ie,{title:0,description:1,direction:2})}}const Xe={Wrap:Ft,Input:Tt};function Ve(t,e,n){const l=t.slice();return l[10]=e[n],l[11]=e,l[12]=n,l}function Ut(t){var r,c,d,p;let e,n,l,o;function i(a){t[7](a,t[10])}let s={type:t[10].type,key:t[10].key,placeholder:(r=t[10])==null?void 0:r.placeholder,options:(c=t[10])==null?void 0:c.options,slider:(d=t[10])==null?void 0:d.slider,button:(p=t[10])==null?void 0:p.button};return t[10].value!==void 0&&(s.value=t[10].value),e=new Xe.Input({props:s}),fe.push(()=>pt(e,"value",i)),e.$on("click",t[3]),e.$on("changed",t[4]),{c(){he(e.$$.fragment),l=w()},m(a,f){ne(e,a,f),C(a,l,f),o=!0},p(a,f){var g,_,v,I;t=a;const u={};f&1&&(u.type=t[10].type),f&1&&(u.key=t[10].key),f&1&&(u.placeholder=(g=t[10])==null?void 0:g.placeholder),f&1&&(u.options=(_=t[10])==null?void 0:_.options),f&1&&(u.slider=(v=t[10])==null?void 0:v.slider),f&1&&(u.button=(I=t[10])==null?void 0:I.button),!n&&f&1&&(n=!0,u.value=t[10].value,ut(()=>n=!1)),e.$set(u)},i(a){o||(j(e.$$.fragment,a),o=!0)},o(a){A(e.$$.fragment,a),o=!1},d(a){a&&S(l),le(e,a)}}}function je(t,e){var i;let n,l,o;return l=new Xe.Wrap({props:{title:e[10].title,description:e[10].description,direction:(i=e[10])==null?void 0:i.direction,$$slots:{default:[Ut]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=Ee(),he(l.$$.fragment),this.first=n},m(s,r){C(s,n,r),ne(l,s,r),o=!0},p(s,r){var d;e=s;const c={};r&1&&(c.title=e[10].title),r&1&&(c.description=e[10].description),r&1&&(c.direction=(d=e[10])==null?void 0:d.direction),r&257&&(c.$$scope={dirty:r,ctx:e}),l.$set(c)},i(s){o||(j(l.$$.fragment,s),o=!0)},o(s){A(l.$$.fragment,s),o=!1},d(s){s&&S(n),le(l,s)}}}function Vt(t){let e,n,l=[],o=new Map,i,s;const r=t[6].default,c=ve(r,t,t[8],null);let d=J(t[0]);const p=a=>a[10].key;for(let a=0;a<d.length;a+=1){let f=Ve(t,d,a),u=p(f);o.set(u,l[a]=je(u,f))}return{c(){e=b("div"),c&&c.c(),n=w();for(let a=0;a<l.length;a+=1)l[a].c();h(e,"class",i="config__tab-container "+t[2]),h(e,"data-name",t[1])},m(a,f){C(a,e,f),c&&c.m(e,null),m(e,n);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);s=!0},p(a,[f]){c&&c.p&&(!s||f&256)&&Be(c,r,a,a[8],s?ye(r,a[8],f,null):we(a[8]),null),f&25&&(d=J(a[0]),Ke(),l=ht(l,f,p,1,a,d,o,e,dt,je,null,Ve),Je()),(!s||f&4&&i!==(i="config__tab-container "+a[2]))&&h(e,"class",i),(!s||f&2)&&h(e,"data-name",a[1])},i(a){if(!s){j(c,a);for(let f=0;f<d.length;f+=1)j(l[f]);s=!0}},o(a){A(c,a);for(let f=0;f<l.length;f+=1)A(l[f]);s=!1},d(a){a&&S(e),c&&c.d(a);for(let f=0;f<l.length;f+=1)l[f].d()}}}function jt(t,e,n){let l,{$$slots:o={},$$scope:i}=e,{group:s}=e,{settingItems:r}=e,{display:c=!0}=e;const d=Ye();function p({detail:u}){d("click",{key:u.key})}function a({detail:u}){d("changed",{group:s,...u})}function f(u,g){t.$$.not_equal(g.value,u)&&(g.value=u,n(0,r))}return t.$$set=u=>{"group"in u&&n(1,s=u.group),"settingItems"in u&&n(0,r=u.settingItems),"display"in u&&n(5,c=u.display),"$$scope"in u&&n(8,i=u.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&n(2,l=c?"":"fn__none")},[r,s,l,p,a,c,o,f,i]}class Ae extends se{constructor(e){super(),oe(this,e,jt,Vt,ie,{group:1,settingItems:0,display:5})}}function Ne(t,e,n){const l=t.slice();return l[8]=e[n],l}function Re(t){let e,n,l,o,i;function s(){return t[5](t[8])}return{c(){e=b("li"),n=b("span"),n.textContent=`${t[8]}`,l=w(),h(n,"class","b3-list-item__text"),h(e,"data-name","editor"),h(e,"class","b3-list-item svelte-1fh5pey"),E(e,"b3-list-item--focus",t[8]===t[0])},m(r,c){C(r,e,c),m(e,n),m(e,l),o||(i=[T(e,"click",s),T(e,"keydown",Rt)],o=!0)},p(r,c){t=r,c&3&&E(e,"b3-list-item--focus",t[8]===t[0])},d(r){r&&S(e),o=!1,P(i)}}}function At(t){let e;return{c(){e=b("div"),e.textContent="💡 This is our default settings.",h(e,"class","fn__flex b3-label")},m(n,l){C(n,e,l)},p:q,d(n){n&&S(e)}}}function Nt(t){let e,n,l,o,i,s,r,c,d=J(t[1]),p=[];for(let a=0;a<d.length;a+=1)p[a]=Re(Ne(t,d,a));return i=new Ae({props:{group:t[1][0],settingItems:t[2],display:t[0]===t[1][0],$$slots:{default:[At]},$$scope:{ctx:t}}}),i.$on("changed",t[4]),i.$on("click",t[6]),r=new Ae({props:{group:t[1][1],settingItems:t[3],display:t[0]===t[1][1]}}),r.$on("changed",t[4]),r.$on("click",t[7]),{c(){e=b("div"),n=b("ul");for(let a=0;a<p.length;a+=1)p[a].c();l=w(),o=b("div"),he(i.$$.fragment),s=w(),he(r.$$.fragment),h(n,"class","b3-tab-bar b3-list b3-list--background svelte-1fh5pey"),h(o,"class","config__tab-wrap"),h(e,"class","fn__flex-1 fn__flex config__panel svelte-1fh5pey")},m(a,f){C(a,e,f),m(e,n);for(let u=0;u<p.length;u+=1)p[u]&&p[u].m(n,null);m(e,l),m(e,o),ne(i,o,null),m(o,s),ne(r,o,null),c=!0},p(a,[f]){if(f&3){d=J(a[1]);let _;for(_=0;_<d.length;_+=1){const v=Ne(a,d,_);p[_]?p[_].p(v,f):(p[_]=Re(v),p[_].c(),p[_].m(n,null))}for(;_<p.length;_+=1)p[_].d(1);p.length=d.length}const u={};f&1&&(u.display=a[0]===a[1][0]),f&2048&&(u.$$scope={dirty:f,ctx:a}),i.$set(u);const g={};f&1&&(g.display=a[0]===a[1][1]),r.$set(g)},i(a){c||(j(i.$$.fragment,a),j(r.$$.fragment,a),c=!0)},o(a){A(i.$$.fragment,a),A(r.$$.fragment,a),c=!1},d(a){a&&S(e),We(p,a),le(i),le(r)}}}const Rt=()=>{};function qt(t,e,n){let l=["🌈 Group 1","✨ Group 2"],o=l[0];return[o,l,[{type:"checkbox",title:"checkbox",description:"checkbox",key:"a",value:!0},{type:"textinput",title:"text",description:"This is a text",key:"b",value:"This is a text",placeholder:"placeholder"},{type:"textarea",title:"textarea",description:"This is a textarea",key:"b2",value:"This is a textarea",placeholder:"placeholder",direction:"row"},{type:"select",title:"select",description:"select",key:"c",value:"x",options:{x:"x",y:"y",z:"z"}}],[{type:"button",title:"button",description:"This is a button",key:"e",value:"Click Button",button:{label:"Click Me",callback:()=>{y.showMessage("Hello, world!")}}},{type:"slider",title:"slider",description:"slider",key:"d",value:50,slider:{min:0,max:100,step:1}}],({detail:a})=>{a.group,l[0]},a=>{n(0,o=a)},({detail:a})=>{console.debug("Click:",a.key)},({detail:a})=>{console.debug("Click:",a.key)}]}class Ht extends se{constructor(e){super(),oe(this,e,qt,Nt,ie,{})}}const xt=t=>{let e;switch(t){case"checkbox":e=n=>n.checked;break;case"select":case"slider":case"textinput":case"textarea":e=n=>n.value;break;case"number":e=n=>parseInt(n.value);break;default:e=()=>null;break}return e},Wt=t=>{let e;switch(t){case"checkbox":e=(n,l)=>{n.checked=l};break;case"select":case"slider":case"textinput":case"textarea":case"number":e=(n,l)=>{n.value=l};break;default:e=()=>{};break}return e};class Yt{constructor(e){U(this,"plugin");U(this,"name");U(this,"file");U(this,"settings",new Map);U(this,"elements",new Map);this.name=e.name??"settings",this.plugin=e.plugin,this.file=this.name.endsWith(".json")?this.name:`${this.name}.json`,this.plugin.setting=new y.Setting({width:e.width,height:e.height,confirmCallback:()=>{for(let l of this.settings.keys())this.updateValueFromElement(l);let n=this.dump();e.callback!==void 0&&e.callback(n),this.plugin.data[this.name]=n,this.save(n)},destroyCallback:()=>{for(let n of this.settings.keys())this.updateElementFromValue(n)}})}async load(){let e=await this.plugin.loadData(this.file);if(console.debug("Load config:",e),e)for(let[n,l]of this.settings)l.value=(e==null?void 0:e[n])??l.value;return this.plugin.data[this.name]=this.dump(),e}async save(e){return e=e??this.dump(),await this.plugin.saveData(this.file,this.dump()),console.debug("Save config:",e),e}get(e){var n;return(n=this.settings.get(e))==null?void 0:n.value}set(e,n){let l=this.settings.get(e);l&&(l.value=n,this.updateElementFromValue(e))}async setAndSave(e,n){let l=this.settings.get(e);l&&(l.value=n,this.updateElementFromValue(e),await this.save())}take(e,n=!1){let l=this.settings.get(e),o=this.elements.get(e);if(o)return n&&this.updateValueFromElement(e),l.getEleVal(o)}async takeAndSave(e){let n=this.take(e,!0);return await this.save(),n}disable(e){let n=this.elements.get(e);n&&(n.disabled=!0)}enable(e){let n=this.elements.get(e);n&&(n.disabled=!1)}dump(){let e={};for(let[n,l]of this.settings)l.type!=="button"&&(e[n]=l.value);return e}addItem(e){if(this.settings.set(e.key,e),e.type==="custom"&&(e.createElement===void 0||e.getEleVal===void 0||e.setEleVal===void 0)){console.error("The custom setting item must have createElement, getEleVal and setEleVal methods");return}if(e.getEleVal===void 0&&(e.getEleVal=xt(e.type)),e.setEleVal===void 0&&(e.setEleVal=Wt(e.type)),e.createElement===void 0){let o=this.createDefaultElement(e);this.elements.set(e.key,o),this.plugin.setting.addItem({title:e.title,description:e==null?void 0:e.description,direction:e==null?void 0:e.direction,createActionElement:()=>(this.updateElementFromValue(e.key),this.getElement(e.key))})}else this.plugin.setting.addItem({title:e.title,description:e==null?void 0:e.description,direction:e==null?void 0:e.direction,createActionElement:()=>{let o=this.get(e.key),i=e.createElement(o);return this.elements.set(e.key,i),i}})}createDefaultElement(e){var o,i,s,r,c,d,p,a,f;let n;const l=u=>{u.key==="Enter"&&(u.preventDefault(),u.stopImmediatePropagation())};switch(e.type){case"checkbox":let u=document.createElement("input");u.type="checkbox",u.checked=e.value,u.className="b3-switch fn__flex-center",n=u,u.onchange=((o=e.action)==null?void 0:o.callback)??(()=>{});break;case"select":let g=document.createElement("select");g.className="b3-select fn__flex-center fn__size200";let _=(e==null?void 0:e.options)??{};for(let D in _){let B=document.createElement("option"),L=_[D];B.value=D,B.text=L,g.appendChild(B)}g.value=e.value,g.onchange=((i=e.action)==null?void 0:i.callback)??(()=>{}),n=g;break;case"slider":let v=document.createElement("input");v.type="range",v.className="b3-slider fn__size200 b3-tooltips b3-tooltips__n",v.ariaLabel=e.value,v.min=((s=e.slider)==null?void 0:s.min.toString())??"0",v.max=((r=e.slider)==null?void 0:r.max.toString())??"100",v.step=((c=e.slider)==null?void 0:c.step.toString())??"1",v.value=e.value,v.onchange=()=>{var D;v.ariaLabel=v.value,(D=e.action)==null||D.callback()},n=v;break;case"textinput":let I=document.createElement("input");I.className="b3-text-field fn__flex-center fn__size200",I.value=e.value,I.onchange=((d=e.action)==null?void 0:d.callback)??(()=>{}),n=I,I.addEventListener("keydown",l);break;case"textarea":let M=document.createElement("textarea");M.className="b3-text-field fn__block",M.value=e.value,M.onchange=((p=e.action)==null?void 0:p.callback)??(()=>{}),n=M;break;case"number":let O=document.createElement("input");O.type="number",O.className="b3-text-field fn__flex-center fn__size200",O.value=e.value,n=O,O.addEventListener("keydown",l);break;case"button":let F=document.createElement("button");F.className="b3-button b3-button--outline fn__flex-center fn__size200",F.innerText=((a=e.button)==null?void 0:a.label)??"Button",F.onclick=((f=e.button)==null?void 0:f.callback)??(()=>{}),n=F;break;case"hint":let k=document.createElement("div");k.className="b3-label fn__flex-center",n=k;break}return n}getElement(e){return this.elements.get(e)}updateValueFromElement(e){let n=this.settings.get(e);if(n.type==="button")return;let l=this.elements.get(e);n.value=n.getEleVal(l)}updateElementFromValue(e){let n=this.settings.get(e);if(n.type==="button")return;let l=this.elements.get(e);n.setEleVal(l,n.value)}}const Gt=t=>{const e=new y.Dialog({title:t.title,content:'<div class="dialog-content" style="display: flex; height: 100%;"/>',width:t.width,height:t.height,destroyCallback:t.callback});return e.element.querySelector(".dialog-content").appendChild(t.ele),e},Kt=t=>{let e=document.createElement("div");e.style.display="contents";let n=t.constructor(e);return Gt({...t,ele:e,callback:()=>{n.$destroy(),t.callback&&t.callback()}}),n},Z="menu-config",ae="custom_tab",ue="dock_tab";class Jt extends y.Plugin{constructor(){super(...arguments);U(this,"customTab");U(this,"isMobile");U(this,"blockIconEventBindThis",this.blockIconEvent.bind(this));U(this,"settingUtils")}async onload(){this.data[Z]={readonlyText:"Readonly"},console.log("loading plugin-sample",this.i18n);const n=y.getFrontend();this.isMobile=n==="mobile"||n==="browser-mobile",this.addIcons(`<symbol id="iconFace" viewBox="0 0 32 32">
<path d="M13.667 17.333c0 0.92-0.747 1.667-1.667 1.667s-1.667-0.747-1.667-1.667 0.747-1.667 1.667-1.667 1.667 0.747 1.667 1.667zM20 15.667c-0.92 0-1.667 0.747-1.667 1.667s0.747 1.667 1.667 1.667 1.667-0.747 1.667-1.667-0.747-1.667-1.667-1.667zM29.333 16c0 7.36-5.973 13.333-13.333 13.333s-13.333-5.973-13.333-13.333 5.973-13.333 13.333-13.333 13.333 5.973 13.333 13.333zM14.213 5.493c1.867 3.093 5.253 5.173 9.12 5.173 0.613 0 1.213-0.067 1.787-0.16-1.867-3.093-5.253-5.173-9.12-5.173-0.613 0-1.213 0.067-1.787 0.16zM5.893 12.627c2.28-1.293 4.040-3.4 4.88-5.92-2.28 1.293-4.040 3.4-4.88 5.92zM26.667 16c0-1.040-0.16-2.040-0.44-2.987-0.933 0.2-1.893 0.32-2.893 0.32-4.173 0-7.893-1.92-10.347-4.92-1.4 3.413-4.187 6.093-7.653 7.4 0.013 0.053 0 0.12 0 0.187 0 5.88 4.787 10.667 10.667 10.667s10.667-4.787 10.667-10.667z"></path>
</symbol>
<symbol id="iconSaving" viewBox="0 0 32 32">
<path d="M20 13.333c0-0.733 0.6-1.333 1.333-1.333s1.333 0.6 1.333 1.333c0 0.733-0.6 1.333-1.333 1.333s-1.333-0.6-1.333-1.333zM10.667 12h6.667v-2.667h-6.667v2.667zM29.333 10v9.293l-3.76 1.253-2.24 7.453h-7.333v-2.667h-2.667v2.667h-7.333c0 0-3.333-11.28-3.333-15.333s3.28-7.333 7.333-7.333h6.667c1.213-1.613 3.147-2.667 5.333-2.667 1.107 0 2 0.893 2 2 0 0.28-0.053 0.533-0.16 0.773-0.187 0.453-0.347 0.973-0.427 1.533l3.027 3.027h2.893zM26.667 12.667h-1.333l-4.667-4.667c0-0.867 0.12-1.72 0.347-2.547-1.293 0.333-2.347 1.293-2.787 2.547h-8.227c-2.573 0-4.667 2.093-4.667 4.667 0 2.507 1.627 8.867 2.68 12.667h2.653v-2.667h8v2.667h2.68l2.067-6.867 3.253-1.093v-4.707z"></path>
</symbol>`);const l=this.addTopBar({icon:"iconFace",title:this.i18n.addTopBarIcon,position:"right",callback:()=>{if(this.isMobile)this.addMenu();else{let i=l.getBoundingClientRect();i.width===0&&(i=document.querySelector("#barMore").getBoundingClientRect()),i.width===0&&(i=document.querySelector("#barPlugins").getBoundingClientRect()),this.addMenu(i)}}}),o=document.createElement("template");o.innerHTML=`<div class="toolbar__item ariaLabel" aria-label="Remove plugin-sample Data">
    <svg>
        <use xlink:href="#iconTrashcan"></use>
    </svg>
</div>`,o.content.firstElementChild.addEventListener("click",()=>{y.confirm("⚠️",this.i18n.confirmRemove.replace("${name}",this.name),()=>{this.removeData(Z).then(()=>{this.data[Z]={readonlyText:"Readonly"},y.showMessage(`[${this.name}]: ${this.i18n.removedData}`)})})}),this.addStatusBar({element:o.content.firstElementChild}),this.addCommand({langKey:"showDialog",hotkey:"⇧⌘O",callback:()=>{this.showDialog()},fileTreeCallback:i=>{console.log(i,"fileTreeCallback")},editorCallback:i=>{console.log(i,"editorCallback")},dockCallback:i=>{console.log(i,"dockCallback")}}),this.addCommand({langKey:"getTab",hotkey:"⇧⌘M",globalCallback:()=>{console.log(this.getOpenedTab())}}),this.addDock({config:{position:"LeftBottom",size:{width:200,height:0},icon:"iconSaving",title:"Custom Dock",hotkey:"⌥⌘W"},data:{text:"This is my custom dock"},type:ue,resize(){console.log(ue+" resize")},update(){console.log(ue+" update")},init:i=>{this.isMobile?i.element.innerHTML=`<div class="toolbar toolbar--border toolbar--dark">
                    <svg class="toolbar__icon"><use xlink:href="#iconEmoji"></use></svg>
                        <div class="toolbar__text">Custom Dock</div>
                    </div>
                    <div class="fn__flex-1 plugin-sample__custom-dock">
                        ${i.data.text}
                    </div>
                    </div>`:i.element.innerHTML=`<div class="fn__flex-1 fn__flex-column">
                    <div class="block__icons">
                        <div class="block__logo">
                            <svg class="block__logoicon"><use xlink:href="#iconEmoji"></use></svg>
                            Custom Dock
                        </div>
                        <span class="fn__flex-1 fn__space"></span>
                        <span data-type="min" class="block__icon b3-tooltips b3-tooltips__sw" aria-label="Min ${y.adaptHotkey("⌘W")}"><svg class="block__logoicon"><use xlink:href="#iconMin"></use></svg></span>
                    </div>
                    <div class="fn__flex-1 plugin-sample__custom-dock">
                        ${i.data.text}
                    </div>
                    </div>`},destroy(){console.log("destroy dock:",ue)}}),this.settingUtils=new Yt({plugin:this,name:Z}),this.settingUtils.addItem({key:"Input",value:"",type:"textinput",title:"Readonly text",description:"Input description",action:{callback:()=>{let i=this.settingUtils.takeAndSave("Input");console.log(i)}}}),this.settingUtils.addItem({key:"InputArea",value:"",type:"textarea",title:"Readonly text",description:"Input description",action:{callback:()=>{let i=this.settingUtils.take("InputArea");console.log(i)}}}),this.settingUtils.addItem({key:"Check",value:!0,type:"checkbox",title:"Checkbox text",description:"Check description",action:{callback:()=>{let i=!this.settingUtils.get("Check");this.settingUtils.set("Check",i),console.log(i)}}}),this.settingUtils.addItem({key:"Select",value:1,type:"select",title:"Select",description:"Select description",options:{1:"Option 1",2:"Option 2"},action:{callback:()=>{let i=this.settingUtils.take("Select");console.log(i)}}}),this.settingUtils.addItem({key:"Slider",value:50,type:"slider",title:"Slider text",description:"Slider description",direction:"column",slider:{min:0,max:100,step:1},action:{callback:()=>{let i=this.settingUtils.take("Slider");console.log(i)}}}),this.settingUtils.addItem({key:"Btn",value:"",type:"button",title:"Button",description:"Button description",button:{label:"Button",callback:()=>{y.showMessage("Button clicked")}}}),this.settingUtils.addItem({key:"Custom Element",value:"",type:"custom",direction:"row",title:"Custom Element",description:"Custom Element description",createElement:i=>{let s=document.createElement("div");return s.style.border="1px solid var(--b3-theme-primary)",s.contentEditable="true",s.textContent=i,s},getEleVal:i=>i.textContent,setEleVal:(i,s)=>{i.textContent=s}}),this.settingUtils.addItem({key:"Hint",value:"",type:"hint",title:this.i18n.hintTitle,description:this.i18n.hintDesc});try{this.settingUtils.load()}catch(i){console.error("Error loading settings storage, probably empty config json:",i)}this.protyleSlash=[{filter:["insert emoji 😊","插入表情 😊","crbqwx"],html:`<div class="b3-list-item__first"><span class="b3-list-item__text">${this.i18n.insertEmoji}</span><span class="b3-list-item__meta">😊</span></div>`,id:"insertEmoji",callback(i){i.insert("😊")}}],this.protyleOptions={toolbar:["block-ref","a","|","text","strong","em","u","s","mark","sup","sub","clear","|","code","kbd","tag","inline-math","inline-memo","|",{name:"insert-smail-emoji",icon:"iconEmoji",hotkey:"⇧⌘I",tipPosition:"n",tip:this.i18n.insertEmoji,click(i){i.insert("😊")}}]},console.log(this.i18n.helloPlugin)}onLayoutReady(){this.settingUtils.load(),console.log(`frontend: ${y.getFrontend()}; backend: ${y.getBackend()}`),console.log(`Official settings value calling example:
`+this.settingUtils.get("InputArea")+`
`+this.settingUtils.get("Slider")+`
`+this.settingUtils.get("Select")+`
`);let n=document.createElement("div");new Pe({target:n,props:{app:this.app}}),this.customTab=this.addTab({type:ae,init(){this.element.appendChild(n),console.log(this.element)},beforeDestroy(){console.log("before destroy tab:",ae)},destroy(){console.log("destroy tab:",ae)}})}async onunload(){console.log(this.i18n.byePlugin),y.showMessage("Goodbye SiYuan Plugin"),console.log("onunload")}uninstall(){console.log("uninstall")}async updateCards(n){return n.cards.sort((l,o)=>l.blockID<o.blockID?-1:l.blockID>o.blockID?1:0),n}openDIYSetting(){let n=new y.Dialog({title:"SettingPannel",content:'<div id="SettingPanel" style="height: 100%;"></div>',width:"800px",destroyCallback:o=>{console.log("destroyCallback",o),l.$destroy()}}),l=new Ht({target:n.element.querySelector("#SettingPanel")})}eventBusPaste(n){n.preventDefault(),n.detail.resolve({textPlain:n.detail.textPlain.trim()})}eventBusLog({detail:n}){console.log(n)}blockIconEvent({detail:n}){n.menu.addItem({iconHTML:"",label:this.i18n.removeSpace,click:()=>{const l=[];n.blockElements.forEach(o=>{const i=o.querySelector('[contenteditable="true"]');i&&(i.textContent=i.textContent.replace(/ /g,""),l.push({id:o.dataset.nodeId,data:o.outerHTML,action:"update"}))}),n.protyle.getInstance().transaction(l)}})}showDialog(){Kt({title:`SiYuan ${y.Constants.SIYUAN_VERSION}`,width:this.isMobile?"92vw":"720px",constructor:n=>new Pe({target:n,props:{app:this.app}})})}addMenu(n){const l=new y.Menu("topBarSample",()=>{console.log(this.i18n.byeMenu)});l.addItem({icon:"iconInfo",label:"Dialog(open help first)",accelerator:this.commands[0].customHotkey,click:()=>{this.showDialog()}}),this.isMobile?l.addItem({icon:"iconFile",label:"Open Doc(open help first)",click:()=>{y.openMobileFileById(this.app,"20200812220555-lj3enxa")}}):(l.addItem({icon:"iconFace",label:"Open Custom Tab",click:()=>{const o=y.openTab({app:this.app,custom:{icon:"iconFace",title:"Custom Tab",data:{text:"This is my custom tab"},id:this.name+ae}});console.log(o)}}),l.addItem({icon:"iconImage",label:"Open Asset Tab(open help first)",click:()=>{const o=y.openTab({app:this.app,asset:{path:"assets/paragraph-20210512165953-ag1nib4.svg"}});console.log(o)}}),l.addItem({icon:"iconFile",label:"Open Doc Tab(open help first)",click:async()=>{const o=await y.openTab({app:this.app,doc:{id:"20200812220555-lj3enxa"}});console.log(o)}}),l.addItem({icon:"iconSearch",label:"Open Search Tab",click:()=>{const o=y.openTab({app:this.app,search:{k:"SiYuan"}});console.log(o)}}),l.addItem({icon:"iconRiffCard",label:"Open Card Tab",click:()=>{const o=y.openTab({app:this.app,card:{type:"all"}});console.log(o)}}),l.addItem({icon:"iconLayout",label:"Open Float Layer(open help first)",click:()=>{this.addFloatLayer({ids:["20210428212840-8rqwn5o","20201225220955-l154bn4"],defIds:["20230415111858-vgohvf3","20200813131152-0wk5akh"],x:window.innerWidth-768-120,y:32})}}),l.addItem({icon:"iconOpenWindow",label:"Open Doc Window(open help first)",click:()=>{y.openWindow({doc:{id:"20200812220555-lj3enxa"}})}})),l.addItem({icon:"iconLock",label:"Lockscreen",click:()=>{y.lockScreen(this.app)}}),l.addItem({icon:"iconScrollHoriz",label:"Event Bus",type:"submenu",submenu:[{icon:"iconSelect",label:"On ws-main",click:()=>{this.eventBus.on("ws-main",this.eventBusLog)}},{icon:"iconClose",label:"Off ws-main",click:()=>{this.eventBus.off("ws-main",this.eventBusLog)}},{icon:"iconSelect",label:"On click-blockicon",click:()=>{this.eventBus.on("click-blockicon",this.blockIconEventBindThis)}},{icon:"iconClose",label:"Off click-blockicon",click:()=>{this.eventBus.off("click-blockicon",this.blockIconEventBindThis)}},{icon:"iconSelect",label:"On click-pdf",click:()=>{this.eventBus.on("click-pdf",this.eventBusLog)}},{icon:"iconClose",label:"Off click-pdf",click:()=>{this.eventBus.off("click-pdf",this.eventBusLog)}},{icon:"iconSelect",label:"On click-editorcontent",click:()=>{this.eventBus.on("click-editorcontent",this.eventBusLog)}},{icon:"iconClose",label:"Off click-editorcontent",click:()=>{this.eventBus.off("click-editorcontent",this.eventBusLog)}},{icon:"iconSelect",label:"On click-editortitleicon",click:()=>{this.eventBus.on("click-editortitleicon",this.eventBusLog)}},{icon:"iconClose",label:"Off click-editortitleicon",click:()=>{this.eventBus.off("click-editortitleicon",this.eventBusLog)}},{icon:"iconSelect",label:"On click-flashcard-action",click:()=>{this.eventBus.on("click-flashcard-action",this.eventBusLog)}},{icon:"iconClose",label:"Off click-flashcard-action",click:()=>{this.eventBus.off("click-flashcard-action",this.eventBusLog)}},{icon:"iconSelect",label:"On open-noneditableblock",click:()=>{this.eventBus.on("open-noneditableblock",this.eventBusLog)}},{icon:"iconClose",label:"Off open-noneditableblock",click:()=>{this.eventBus.off("open-noneditableblock",this.eventBusLog)}},{icon:"iconSelect",label:"On loaded-protyle-static",click:()=>{this.eventBus.on("loaded-protyle-static",this.eventBusLog)}},{icon:"iconClose",label:"Off loaded-protyle-static",click:()=>{this.eventBus.off("loaded-protyle-static",this.eventBusLog)}},{icon:"iconSelect",label:"On loaded-protyle-dynamic",click:()=>{this.eventBus.on("loaded-protyle-dynamic",this.eventBusLog)}},{icon:"iconClose",label:"Off loaded-protyle-dynamic",click:()=>{this.eventBus.off("loaded-protyle-dynamic",this.eventBusLog)}},{icon:"iconSelect",label:"On switch-protyle",click:()=>{this.eventBus.on("switch-protyle",this.eventBusLog)}},{icon:"iconClose",label:"Off switch-protyle",click:()=>{this.eventBus.off("switch-protyle",this.eventBusLog)}},{icon:"iconSelect",label:"On destroy-protyle",click:()=>{this.eventBus.on("destroy-protyle",this.eventBusLog)}},{icon:"iconClose",label:"Off destroy-protyle",click:()=>{this.eventBus.off("destroy-protyle",this.eventBusLog)}},{icon:"iconSelect",label:"On open-menu-doctree",click:()=>{this.eventBus.on("open-menu-doctree",this.eventBusLog)}},{icon:"iconClose",label:"Off open-menu-doctree",click:()=>{this.eventBus.off("open-menu-doctree",this.eventBusLog)}},{icon:"iconSelect",label:"On open-menu-blockref",click:()=>{this.eventBus.on("open-menu-blockref",this.eventBusLog)}},{icon:"iconClose",label:"Off open-menu-blockref",click:()=>{this.eventBus.off("open-menu-blockref",this.eventBusLog)}},{icon:"iconSelect",label:"On open-menu-fileannotationref",click:()=>{this.eventBus.on("open-menu-fileannotationref",this.eventBusLog)}},{icon:"iconClose",label:"Off open-menu-fileannotationref",click:()=>{this.eventBus.off("open-menu-fileannotationref",this.eventBusLog)}},{icon:"iconSelect",label:"On open-menu-tag",click:()=>{this.eventBus.on("open-menu-tag",this.eventBusLog)}},{icon:"iconClose",label:"Off open-menu-tag",click:()=>{this.eventBus.off("open-menu-tag",this.eventBusLog)}},{icon:"iconSelect",label:"On open-menu-link",click:()=>{this.eventBus.on("open-menu-link",this.eventBusLog)}},{icon:"iconClose",label:"Off open-menu-link",click:()=>{this.eventBus.off("open-menu-link",this.eventBusLog)}},{icon:"iconSelect",label:"On open-menu-image",click:()=>{this.eventBus.on("open-menu-image",this.eventBusLog)}},{icon:"iconClose",label:"Off open-menu-image",click:()=>{this.eventBus.off("open-menu-image",this.eventBusLog)}},{icon:"iconSelect",label:"On open-menu-av",click:()=>{this.eventBus.on("open-menu-av",this.eventBusLog)}},{icon:"iconClose",label:"Off open-menu-av",click:()=>{this.eventBus.off("open-menu-av",this.eventBusLog)}},{icon:"iconSelect",label:"On open-menu-content",click:()=>{this.eventBus.on("open-menu-content",this.eventBusLog)}},{icon:"iconClose",label:"Off open-menu-content",click:()=>{this.eventBus.off("open-menu-content",this.eventBusLog)}},{icon:"iconSelect",label:"On open-menu-breadcrumbmore",click:()=>{this.eventBus.on("open-menu-breadcrumbmore",this.eventBusLog)}},{icon:"iconClose",label:"Off open-menu-breadcrumbmore",click:()=>{this.eventBus.off("open-menu-breadcrumbmore",this.eventBusLog)}},{icon:"iconSelect",label:"On open-menu-inbox",click:()=>{this.eventBus.on("open-menu-inbox",this.eventBusLog)}},{icon:"iconClose",label:"Off open-menu-inbox",click:()=>{this.eventBus.off("open-menu-inbox",this.eventBusLog)}},{icon:"iconSelect",label:"On input-search",click:()=>{this.eventBus.on("input-search",this.eventBusLog)}},{icon:"iconClose",label:"Off input-search",click:()=>{this.eventBus.off("input-search",this.eventBusLog)}},{icon:"iconSelect",label:"On paste",click:()=>{this.eventBus.on("paste",this.eventBusPaste)}},{icon:"iconClose",label:"Off paste",click:()=>{this.eventBus.off("paste",this.eventBusPaste)}},{icon:"iconSelect",label:"On open-siyuan-url-plugin",click:()=>{this.eventBus.on("open-siyuan-url-plugin",this.eventBusLog)}},{icon:"iconClose",label:"Off open-siyuan-url-plugin",click:()=>{this.eventBus.off("open-siyuan-url-plugin",this.eventBusLog)}},{icon:"iconSelect",label:"On open-siyuan-url-block",click:()=>{this.eventBus.on("open-siyuan-url-block",this.eventBusLog)}},{icon:"iconClose",label:"Off open-siyuan-url-block",click:()=>{this.eventBus.off("open-siyuan-url-block",this.eventBusLog)}}]}),l.addSeparator(),l.addItem({icon:"iconSettings",label:"Official Setting Dialog",click:()=>{this.openSetting()}}),l.addItem({icon:"iconSettings",label:"A custom setting dialog (by svelte)",click:()=>{this.openDIYSetting()}}),l.addItem({icon:"iconSparkles",label:this.data[Z].readonlyText||"Readonly",type:"readonly"}),this.isMobile?l.fullscreen():l.open({x:n.right,y:n.bottom,isLeft:!0})}}module.exports=Jt;
